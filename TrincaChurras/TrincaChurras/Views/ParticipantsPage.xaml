<?xml version="1.0" encoding="UTF-8" ?>
<ContentPage
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" xmlns:pancake="clr-namespace:Xamarin.Forms.PancakeView;assembly=Xamarin.Forms.PancakeView"
    NavigationPage.HasNavigationBar="False"
    x:Class="TrincaChurras.Views.ParticipantsPage">
    <ContentPage.Content>
        <Grid BackgroundColor="#F9F9F9">
            <Image BackgroundColor="#FFD935"
                   Source="bbq-pattern.png"
                   VerticalOptions="StartAndExpand"/>
            <Grid Margin="0,80"
                  VerticalOptions="Start">

                <Button Text="&#xf104;"
                        Margin="10,0"
                        BackgroundColor="Transparent"
                        FontSize="Large"
                        FontFamily="FontAwesome"
                        Command="{Binding BackCommand}"
                        TextColor="Black"
                        VerticalOptions="CenterAndExpand"
                        HorizontalOptions="Start"/>

                <Label HorizontalOptions="CenterAndExpand"
                       Text="Agenda de Churras"
                       FontSize="Subtitle"
                       VerticalTextAlignment="Center"
                       TextColor="Black" FontFamily="RalewayBold"/>
            </Grid>
            <pancake:PancakeView Margin="10,170,10,100">
            <pancake:PancakeView.Shadow>
                <pancake:DropShadow Color="Black"
                                Offset="0,0"
                                Opacity=".2"
                                BlurRadius="8"/>
                </pancake:PancakeView.Shadow>
                    <Grid VerticalOptions="FillAndExpand"
                          Padding="20"
                          ColumnDefinitions="3*,*"
                          RowDefinitions="Auto,Auto,Auto"
                          BackgroundColor="White">

                        <Label Text="{Binding Churras.Date, Converter={StaticResource DataConverter}}"
                               FontFamily="RalewayBold"
                               FontSize="Medium"
                               TextColor="Black"/>
                        <Label Text="{Binding Churras.Title}"
                               Grid.Row="1"
                               FontFamily="RalewayBold"
                               FontSize="Large"
                               TextColor="Black"/>

                        <StackLayout Orientation="Horizontal" Grid.Column="1">
                            <Image Source="icon_people.png"
                                   HeightRequest="15"/>
                            <Label Text="{Binding TotalParticipants}"
                                   FontFamily="RalewayRegular"
                                   FontSize="Medium"
                                   TextColor="Black"/>
                        </StackLayout>

                        <StackLayout Orientation="Horizontal"
                                     Grid.Row="1"
                                     Grid.Column="1">
                            <Image Source="icon_money.png"
                                HeightRequest="15"/>
                            <Label Text="{Binding TotalValue, StringFormat='R${0:F1}'}"
                                   Grid.Row="1"
                                   Grid.Column="1"
                                   VerticalTextAlignment="Center"
                                   FontFamily="RalewayRegular"
                                   FontSize="Medium"
                                   TextColor="Black"/>
                        </StackLayout>

                        <CollectionView Grid.ColumnSpan="2"
                                        Margin="0,20,0,0"
                                        ItemsSource="{Binding ParticipantsList}"
                                        Grid.Row="2">
                            <CollectionView.ItemsLayout>
                                <LinearItemsLayout ItemSpacing="10" Orientation="Vertical"/>
                            </CollectionView.ItemsLayout>
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <StackLayout BackgroundColor="White">
                                        <Grid ColumnDefinitions="3*,*" BackgroundColor="White">
                                            <StackLayout Spacing="0" Orientation="Horizontal" BackgroundColor="White">
                                                <CheckBox WidthRequest="32" Color="#FFD836"/>
                                                <Label TextColor="Black"
                                                       VerticalTextAlignment="Center"
                                                       FontFamily="RalewayRegular"
                                                       Text="{Binding Name}"/>
                                            </StackLayout>
                                            <Label TextColor="Black"
                                                   VerticalTextAlignment="Center"
                                                   Grid.Column="1"
                                                   FontFamily="RalewayBold">
                                                <Label.FormattedText>
                                                    <FormattedString>
                                                        <Span Text="R$"/>
                                                        <Span Text="{Binding Value_paid, StringFormat='{0:F2}'}"/>
                                                    </FormattedString>
                                                </Label.FormattedText>
                                            </Label>
                                        </Grid>
                                        <BoxView HeightRequest="1"
                                                 HorizontalOptions="FillAndExpand"
                                                 Opacity=".5"
                                                 Color="#E5C231"/>
                                    </StackLayout>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </Grid>
            </pancake:PancakeView>

            <Image Source="trinca.png"
                   VerticalOptions="End"
                   Margin="0,0,0,30"/>
        </Grid>
    </ContentPage.Content>
</ContentPage>
